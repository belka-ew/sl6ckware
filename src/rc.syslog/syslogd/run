#!/bin/execlineb -P

###################################
# Start the system logging daemon #
###################################

# Uncomment the following line to use the -c option to syslogd.  This will
# disable suppressing repeated messages, which may be useful with tools that
# parse the logs, such as fail2ban:
#export SYSLOGD_OPTIONS "-c"
backtick -ni SYSLOGD { which syslogd }
# Using /dev/log socket appearance as syslogd readiness indicator
background {
  fdmove 1 3
  inotifywait -qe attrib --include log /dev
}
fdclose 3
multisubstitute
{
  importas -u syslogd SYSLOGD
  importas -u syslogd_options SYSLOGD_OPTIONS
}
foreground { echo "syslogd: Starting syslogd daemon: ${syslogd} -n" $syslogd_options }
emptyenv $syslogd -n $syslogd_options
