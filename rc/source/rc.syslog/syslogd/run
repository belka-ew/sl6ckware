#!/bin/execlineb -P

###################################
# Start the system logging daemon #
###################################

# Uncomment the following line to use the -c option to syslogd.  This will
# disable suppressing repeated messages, which may be useful with tools that
# parse the logs, such as fail2ban:
#export SYSLOGD_OPTIONS "-c"
backtick -ni SYSLOGD { which syslogd }
multisubstitute {
  importas -u syslogd SYSLOGD
  importas -usd" " syslogd_options SYSLOGD_OPTIONS
}
foreground { echo "syslogd: Starting syslogd daemon: ${syslogd} -n" $syslogd_options }
# Using /dev/log socket availability as syslogd readiness indicator
s6-notifyoncheck -dc "[ -S /dev/log ]"
emptyenv $syslogd -n $syslogd_options
